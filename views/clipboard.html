<script>
    $(document).ready(function() {


    });

    $(document).keydown(function(e) {
        switch(e.which) {
            case 37: getPrevItem();// left
                break;

            case 39: getNextItem();// right
                break;

            default: return; // exit this handler for other keys
        }
        e.preventDefault(); // prevent the default action (scroll / move caret)
    });


    var currentLeft = 0;
    function getPrevItem() {
        var activeItem = getActiveItem();
        var prevItem = activeItem.prev();

        if (prevItem.length > 0) {
            activeItem.removeClass("active");
            prevItem.addClass("active");

            if (currentLeft < 0) {
                currentLeft += prevItem.outerWidth(true);
                $('.clipboard-content-container').css("transform", "translateX("+currentLeft+"px)");
            }
        }
    }

    function getNextItem() {
        var activeItem = getActiveItem();
        var nextItem = activeItem.next();
        var screenWidth = $(window).width();
        var breakPoint = (($('.clipboard-item').length * activeItem.outerWidth(true)) - screenWidth) * (-1);


        if (nextItem.length > 0) {
            activeItem.removeClass("active");
            nextItem.addClass("active");

            console.log((($('.clipboard-item').length * activeItem.outerWidth(true)) - screenWidth) * (-1), currentLeft);
            if (breakPoint  < currentLeft) {
                currentLeft -= nextItem.outerWidth(true);
                $('.clipboard-content-container').css("transform", "translateX("+currentLeft+"px)");
            }
        }
    }

    function getTransformX(el) {
        return parseInt(el.css("transform").split(',')[4]);
    }

    function getActiveItem() {
        return $('.clipboard-item.active');
    }
</script>
<div ng-controller="clipboardController">
    <div class="row">
        <div class="col-md-offset-8 col-md-4 search-panel">
            <input class="form-control" placeholder="Search" ng-model="search">
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="clipboard-content-container" ng-init="list()">
                <div class="clipboard-item" ng-class='{active:$first}' dir-paginate="item in items | filter: search | itemsPerPage: 20">
                    <div class="clipboard-content">
                        {{item.plaintext}}
                    </div>
                    <div class="clipboard-info">{{ item.datetime | dateToISO | date:'dd.MM.yyyy'}}</div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 text-center">
            <dir-pagination-controls>
            </dir-pagination-controls>
        </div>
    </div>

    <div class="modal fade" id="clipboardController" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">Ã—</span></button>
                    <h4 class="modal-title" id="myModalLabel">clipboard</h4>
                </div>
                <div class="modal-body">
                    <form class="basel-form">

                        <div class="form-group"><label>id</label><input type="text" class="form-control"
                                                                        ng-model="form.id"></div>
                        <div class="form-group"><label>text</label><input type="text" class="form-control"
                                                                          ng-model="form.text"></div>
                        <div class="form-group"><label>image</label><input type="text" class="form-control"
                                                                           ng-model="form.image"></div>
                        <div class="form-group"><label>datetime</label><input type="text" class="form-control"
                                                                              ng-model="form.datetime"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default basel-btn-cancel" ng-click="cancel()"
                            data-dismiss="modal">Cancel
                    </button>
                    <button type="button" class="btn btn-primary basel-btn-save" ng-click="save()">Save</button>
                </div>
            </div>
        </div>
    </div>
</div>
